<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="IT技術を中心としたブログ"/><meta property="og:image" content="https://github.com/chaya2z/chaya2z.github.io/blob/gh-pages/main_ogp.png?raw=true"/><meta name="og:title" content="海底タランテラ"/><meta name="twitter:card" content="summary_large_image"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous"/><title>自宅インフラの紹介 ( 2022 )</title><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/04a7f9b5f46e743e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/04a7f9b5f46e743e.css" data-n-g=""/><link rel="preload" href="/_next/static/css/0ad87472260d4bb9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0ad87472260d4bb9.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-062c35b1bbcb9ed2.js" defer=""></script><script src="/_next/static/chunks/pages/_app-5508371544ba549e.js" defer=""></script><script src="/_next/static/chunks/395-04da106b08c8ce64.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Byear%5D/%5Bmonth%5D/%5Bdate%5D/%5Bid%5D-8e53c95a25f74456.js" defer=""></script><script src="/_next/static/_LQl5L2SGh1ShVBXx4au5/_buildManifest.js" defer=""></script><script src="/_next/static/_LQl5L2SGh1ShVBXx4au5/_ssgManifest.js" defer=""></script><script src="/_next/static/_LQl5L2SGh1ShVBXx4au5/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><header><div class="header_container__xYHxC"><h1>海底タランテラ</h1></div><div class="navbar_container__whdC7"><a class="navbar_item__jtENX" href="/">Home</a><a class="navbar_item__jtENX" href="/posts/">Posts</a><a class="navbar_item__jtENX" href="/about/">About</a></div></header><div class="layout_container__fbLkO"><main><article><h1 class="utils_headingXl__u25Y2">自宅インフラの紹介 ( 2022 )</h1><div class="utils_lightText__eUzGY"><time dateTime="2022-06-27">June 27, 2022</time></div><div><p>趣味でやっている自宅サーバの紹介です。</p>
<h1 id="トポロジ">トポロジ</h1>
<p><img src="/assets/2022062701/homeinfra-blog-01.png" alt="機材一覧"></p>
<p>小規模なネットワークとして一般的な形だと思います。</p>
<p>後述しますが、SAN として動くサーバとは直接接続しています。</p>
<h2 id="置いてる機材">置いてる機材</h2>
<p><img src="/assets/2022062701/homeinfra-blog-02.png" alt="機材一覧"></p>
<table>
<thead>
<tr>
<th>番号</th>
<th>役割</th>
<th>機種名</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>サーバ</td>
<td>HTE Proliant DL380 Gen8</td>
</tr>
<tr>
<td>2</td>
<td>サーバ</td>
<td>HTE Proliant ML310e Gen8</td>
</tr>
<tr>
<td>3</td>
<td>サーバ</td>
<td>HTE Proliant ML310e Gen8</td>
</tr>
<tr>
<td>4</td>
<td>ファイアウォール</td>
<td>NTT BizBox</td>
</tr>
<tr>
<td>5</td>
<td>L2 スイッチ</td>
<td>Cisco Catalyst 2960X</td>
</tr>
<tr>
<td>6</td>
<td>L3 スイッチ</td>
<td>Cisco Catalyst 3750X</td>
</tr>
</tbody>
</table>
<h1 id="動かしてるもの">動かしてるもの</h1>
<p><img src="/assets/2022062701/homeinfra-blog-03.png" alt="機材一覧"></p>
<h2 id="esxi">ESXi</h2>
<p>ストレージサーバ、Kubernetes、DNS サーバなどを運用しています。</p>
<h2 id="san">SAN</h2>
<p>EXSi のデータストア用です。ESXi と直結しています。</p>
<h2 id="監視">監視</h2>
<p>サーバやネットワーク機器の監視をしています。</p>
<h2 id="fw--ファイアウォール-">FW ( ファイアウォール )</h2>
<p>Sophos Firewall Home Edition をインストールして使っています。無償利用できて、機能も豊富なのでおすすめです。特に L7 でのフィルタリングと VPN 機能はすごいなと思いました。</p>
<p>初期設定だとフィルタリングされすぎてしまうので注意。</p>
<h2 id="ネットワーク">ネットワーク</h2>
<p>ルーティングは OSPF を使った動的ルーティングをしています。 フィーチャーセットの問題で L3 スイッチが BGP を喋れないため OSPF を選びました。</p>
<p>VLAN 管理は L3 スイッチにやらせています。ネットワークの分割は 192.168.0.0/16 から VLAN に /24 を切り分けます。例えば、監視用には VLAN4 で 192.168.4.0/24 というネットワークを割り当てる感じです ( つまり、VLAN id と IP アドレスを関連させたかった ) 。</p>
<h2 id="おわり">おわり</h2>
<p>特殊なことはしていないので、あまり面白味は無いかもしれませんが、紹介は以上です。</p></div></article></main><div class="layout_backToHome__9sjx_"><a href="/">← Back to home</a></div></div><div class="footer_container__LsEE4"><small>© 海底タランテラ chaya2z</small><div class="footer_text__veFtv">Powered by GitHub Pages</div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"post01","year":"2022","month":"06","date":"27","contentHtml":"\u003cp\u003e趣味でやっている自宅サーバの紹介です。\u003c/p\u003e\n\u003ch1 id=\"トポロジ\"\u003eトポロジ\u003c/h1\u003e\n\u003cp\u003e\u003cimg src=\"/assets/2022062701/homeinfra-blog-01.png\" alt=\"機材一覧\"\u003e\u003c/p\u003e\n\u003cp\u003e小規模なネットワークとして一般的な形だと思います。\u003c/p\u003e\n\u003cp\u003e後述しますが、SAN として動くサーバとは直接接続しています。\u003c/p\u003e\n\u003ch2 id=\"置いてる機材\"\u003e置いてる機材\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"/assets/2022062701/homeinfra-blog-02.png\" alt=\"機材一覧\"\u003e\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003e番号\u003c/th\u003e\n\u003cth\u003e役割\u003c/th\u003e\n\u003cth\u003e機種名\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003eサーバ\u003c/td\u003e\n\u003ctd\u003eHTE Proliant DL380 Gen8\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003eサーバ\u003c/td\u003e\n\u003ctd\u003eHTE Proliant ML310e Gen8\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003eサーバ\u003c/td\u003e\n\u003ctd\u003eHTE Proliant ML310e Gen8\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003eファイアウォール\u003c/td\u003e\n\u003ctd\u003eNTT BizBox\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003ctd\u003eL2 スイッチ\u003c/td\u003e\n\u003ctd\u003eCisco Catalyst 2960X\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e6\u003c/td\u003e\n\u003ctd\u003eL3 スイッチ\u003c/td\u003e\n\u003ctd\u003eCisco Catalyst 3750X\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch1 id=\"動かしてるもの\"\u003e動かしてるもの\u003c/h1\u003e\n\u003cp\u003e\u003cimg src=\"/assets/2022062701/homeinfra-blog-03.png\" alt=\"機材一覧\"\u003e\u003c/p\u003e\n\u003ch2 id=\"esxi\"\u003eESXi\u003c/h2\u003e\n\u003cp\u003eストレージサーバ、Kubernetes、DNS サーバなどを運用しています。\u003c/p\u003e\n\u003ch2 id=\"san\"\u003eSAN\u003c/h2\u003e\n\u003cp\u003eEXSi のデータストア用です。ESXi と直結しています。\u003c/p\u003e\n\u003ch2 id=\"監視\"\u003e監視\u003c/h2\u003e\n\u003cp\u003eサーバやネットワーク機器の監視をしています。\u003c/p\u003e\n\u003ch2 id=\"fw--ファイアウォール-\"\u003eFW ( ファイアウォール )\u003c/h2\u003e\n\u003cp\u003eSophos Firewall Home Edition をインストールして使っています。無償利用できて、機能も豊富なのでおすすめです。特に L7 でのフィルタリングと VPN 機能はすごいなと思いました。\u003c/p\u003e\n\u003cp\u003e初期設定だとフィルタリングされすぎてしまうので注意。\u003c/p\u003e\n\u003ch2 id=\"ネットワーク\"\u003eネットワーク\u003c/h2\u003e\n\u003cp\u003eルーティングは OSPF を使った動的ルーティングをしています。 フィーチャーセットの問題で L3 スイッチが BGP を喋れないため OSPF を選びました。\u003c/p\u003e\n\u003cp\u003eVLAN 管理は L3 スイッチにやらせています。ネットワークの分割は 192.168.0.0/16 から VLAN に /24 を切り分けます。例えば、監視用には VLAN4 で 192.168.4.0/24 というネットワークを割り当てる感じです ( つまり、VLAN id と IP アドレスを関連させたかった ) 。\u003c/p\u003e\n\u003ch2 id=\"おわり\"\u003eおわり\u003c/h2\u003e\n\u003cp\u003e特殊なことはしていないので、あまり面白味は無いかもしれませんが、紹介は以上です。\u003c/p\u003e","title":"自宅インフラの紹介 ( 2022 )","created_at":"2022-06-27"}},"__N_SSG":true},"page":"/posts/[year]/[month]/[date]/[id]","query":{"year":"2022","month":"06","date":"27","id":"post01"},"buildId":"_LQl5L2SGh1ShVBXx4au5","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>