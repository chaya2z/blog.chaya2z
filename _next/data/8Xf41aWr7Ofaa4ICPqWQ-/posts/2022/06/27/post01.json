{"pageProps":{"postData":{"id":"post01","year":"2022","month":"06","date":"27","contentHtml":"<p>趣味でやっている自宅サーバの紹介です。</p>\n<h1 id=\"トポロジ\">トポロジ</h1>\n<p><img src=\"/assets/2022062701/homeinfra-blog-01.png\" alt=\"機材一覧\"></p>\n<p>小規模なネットワークとして一般的な形だと思います。</p>\n<p>後述しますが、SAN として動くサーバとは直接接続しています。</p>\n<h2 id=\"置いてる機材\">置いてる機材</h2>\n<p><img src=\"/assets/2022062701/homeinfra-blog-02.png\" alt=\"機材一覧\"></p>\n<table>\n<thead>\n<tr>\n<th>番号</th>\n<th>役割</th>\n<th>機種名</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>サーバ</td>\n<td>HTE Proliant DL380 Gen8</td>\n</tr>\n<tr>\n<td>2</td>\n<td>サーバ</td>\n<td>HTE Proliant ML310e Gen8</td>\n</tr>\n<tr>\n<td>3</td>\n<td>サーバ</td>\n<td>HTE Proliant ML310e Gen8</td>\n</tr>\n<tr>\n<td>4</td>\n<td>ファイアウォール</td>\n<td>NTT BizBox</td>\n</tr>\n<tr>\n<td>5</td>\n<td>L2 スイッチ</td>\n<td>Cisco Catalyst 2960X</td>\n</tr>\n<tr>\n<td>6</td>\n<td>L3 スイッチ</td>\n<td>Cisco Catalyst 3750X</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"動かしてるもの\">動かしてるもの</h1>\n<p><img src=\"/assets/2022062701/homeinfra-blog-03.png\" alt=\"機材一覧\"></p>\n<h2 id=\"esxi\">ESXi</h2>\n<p>ストレージサーバ、Kubernetes、DNS サーバなどを運用しています。</p>\n<h2 id=\"san\">SAN</h2>\n<p>EXSi のデータストア用です。ESXi と直結しています。</p>\n<h2 id=\"監視\">監視</h2>\n<p>サーバやネットワーク機器の監視をしています。</p>\n<h2 id=\"fw--ファイアウォール-\">FW ( ファイアウォール )</h2>\n<p>Sophos Firewall Home Edition をインストールして使っています。無償利用できて、機能も豊富なのでおすすめです。特に L7 でのフィルタリングと VPN 機能はすごいなと思いました。</p>\n<p>初期設定だとフィルタリングされすぎてしまうので注意。</p>\n<h2 id=\"ネットワーク\">ネットワーク</h2>\n<p>ルーティングは OSPF を使った動的ルーティングをしています。 フィーチャーセットの問題で L3 スイッチが BGP を喋れないため OSPF を選びました。</p>\n<p>VLAN 管理は L3 スイッチにやらせています。ネットワークの分割は 192.168.0.0/16 から VLAN に /24 を切り分けます。例えば、監視用には VLAN4 で 192.168.4.0/24 というネットワークを割り当てる感じです ( つまり、VLAN id と IP アドレスを関連させたかった ) 。</p>\n<h2 id=\"おわり\">おわり</h2>\n<p>特殊なことはしていないので、あまり面白味は無いかもしれませんが、紹介は以上です。</p>","title":"自宅インフラの紹介 ( 2022 )","created_at":"2022-06-27"}},"__N_SSG":true}